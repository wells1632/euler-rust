10 REM CONTINUED FRACTION ODD PERIOD COUNTER
20 LM = 10000
30 C = 0
40 FOR N = 2 TO LM
50   GOSUB 1000: REM CHECK PERFECT SQUARE
60   IF PS = 1 THEN GOTO 110
70   GOSUB 2000: REM CALCULATE PERIOD
80   IF P - INT(P / 2) * 2 = 1 THEN C = C + 1
110  NEXT N
120 PRINT "NUMBERS WITH ODD PERIOD FOR N <= "; LM; ": "; C
130 END

1000 REM SUBROUTINE: CHECK IF PERFECT SQUARE
1010 SQ = INT(SQR(N))
1020 IF SQ * SQ = N THEN PS = 1: RETURN
1030 PS = 0
1040 RETURN

2000 REM SUBROUTINE: CALCULATE CONTINUED FRACTION PERIOD
2010 A0 = INT(SQR(N))
2020 M = 0
2030 D = 1
2040 A = A0
2050 P = 0
2060 REM BEGIN PERIOD CALCULATION LOOP
2070 M = D * A - M
2080 D = INT((N - M * M) / D)
2090 A = INT((A0 + M) / D)
2100 P = P + 1
2110 IF A = 2 * A0 THEN RETURN
2120 GOTO 2070